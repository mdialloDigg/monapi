<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>CrÃ©er un transfert</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
}

form {
  background: white;
  width: 900px;
  margin: 40px auto;
  padding: 20px;
  border-radius: 8px;
}

.container {
  display: flex;
  gap: 20px;
}

.box {
  flex: 1;
  padding: 15px;
  border-radius: 6px;
}

.origin {
  background: #e9f1ff;
}

.dest {
  background: #ffdede;
}

h3, h4 {
  text-align: center;
}

input, select, button {
  width: 100%;
  padding: 8px;
  margin-top: 10px;
}

button {
  margin-top: 20px;
  background: #007bff;
  color: white;
  border: none;
  font-size: 16px;
  cursor: pointer;
}

#message {
  text-align: center;
  margin-top: 15px;
  font-weight: bold;
}
</style>
</head>

<body>

<form id="form">
<h3>ðŸ’¸ CrÃ©er un transfert</h3>

<div class="container">

  <div class="box origin">
    <h4>ðŸ“¤ Origine</h4>
    <input id="senderFirstName" placeholder="PrÃ©nom expÃ©diteur" required>
    <input id="senderLastName" placeholder="Nom expÃ©diteur" required>
    <input id="senderPhone" placeholder="TÃ©lÃ©phone expÃ©diteur" required>

    <select id="originLocation" required>
      <option value="">Pays / Ville de dÃ©part</option>
      <option>Conakry</option>
      <option>LabÃ©</option>
      <option>France</option>
      <option>Belgique</option>
      <option>New York</option>
      <option>Atlanta</option>
      <option>Allemagne</option>
      <option>DubaÃ¯</option>
      <option>Chine</option>
    </select>

    <input id="amount" type="number" placeholder="Montant" required>
    <input id="fees" type="number" placeholder="Frais" required>
    <input id="feePercent" type="number" placeholder="% Frais" required>
  </div>

  <div class="box dest">
    <h4>ðŸ“¥ Destination</h4>
    <input id="receiverFirstName" placeholder="PrÃ©nom destinataire" required>
    <input id="receiverLastName" placeholder="Nom destinataire" required>
    <input id="receiverPhone" placeholder="TÃ©lÃ©phone destinataire" required>

    <select id="destinationLocation" required>
      <option value="">Pays / Ville destination</option>
      <option>Conakry</option>
      <option>LabÃ©</option>
      <option>France</option>
      <option>Belgique</option>
      <option>New York</option>
      <option>Atlanta</option>
      <option>Allemagne</option>
      <option>DubaÃ¯</option>
      <option>Chine</option>
    </select>

    <input id="recoveryAmount" type="number" placeholder="Montant reÃ§u" required>
    <input id="recoveryMode" placeholder="Mode de rÃ©cupÃ©ration" required>
  </div>

</div>

<input id="password" type="password" placeholder="Mot de passe" required>

<button type="submit">ðŸ’¾ Enregistrer</button>
<p id="message"></p>
</form>

<script>
document.getElementById('form').addEventListener('submit', async e => {
  e.preventDefault();

  const payload = {
    senderFirstName: document.getElementById('senderFirstName').value,
    senderLastName: document.getElementById('senderLastName').value,
    senderPhone: document.getElementById('senderPhone').value,
    originLocation: document.getElementById('originLocation').value,
    amount: Number(document.getElementById('amount').value),
    fees: Number(document.getElementById('fees').value),
    feePercent: Number(document.getElementById('feePercent').value),
    receiverFirstName: document.getElementById('receiverFirstName').value,
    receiverLastName: document.getElementById('receiverLastName').value,
    receiverPhone: document.getElementById('receiverPhone').value,
    destinationLocation: document.getElementById('destinationLocation').value,
    recoveryAmount: Number(document.getElementById('recoveryAmount').value),
    recoveryMode: document.getElementById('recoveryMode').value,
    password: document.getElementById('password').value
  };

  const message = document.getElementById('message');

  try {
    const res = await fetch('/users', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });

    const data = await res.json();
    message.innerText = data.message || 'SuccÃ¨s';

    if (res.ok) document.getElementById('form').reset();

  } catch (err) {
    console.error(err);
    message.innerText = 'Erreur serveur';
  }
});
</script>

</body>
</html>
